
PASSWORD=Ng112358$
HOST=localhost
USER=root
DATABASE=BaseEAM_Phaner
DB_FILE=dump.sql
EXCLUDED_TABLES=( 
ActivityLog
#ActivityLogType
Address
Adjust
AdjustItem
Asset
AssetDowntime
AssetLocationHistory
AssetSparePart
AssetStatusHistory
Assignment
#AssignmentGroup
#AssignmentGroupUser
AssignmentHistory
Assignment_User
Attachment
#Attribute
#AuditEntityConfiguration
AuditTrail
#AutoNumber
AutomatedAction
#Calendar
#CalendarNonWorking
#Code
Comment
Company
Company_Address
Contact
Contract
ContractPriceItem
ContractTerm
#Craft
#Currency
EntityAttachment
EntityAttribute
#Feature
#FeatureAction
#Filter
ImportProfile
Issue
IssueItem
Item
ItemGroup
#Language
#LocaleStringResource
Location
Log
Message
#MessageTemplate
#Meter
MeterEvent
MeterEventHistory
MeterGroup
MeterLineItem
#Module
NotificationSequence
#Organization
Organization_Address
PMItem
PMLabor
PMMeterFrequency
PMMiscCost
PMServiceItem
PMTask
PM_MeterEvent
#PermissionRecord
PhysicalCount
PhysicalCountItem
Picture
Point
PointMeterLineItem
PreventiveMaintenance
Property
PurchaseOrder
PurchaseOrderItem
PurchaseOrderMiscCost
PurchaseRequest
PurchaseRequestItem
QRTZ_BLOB_TRIGGERS
QRTZ_CALENDARS
QRTZ_CRON_TRIGGERS
QRTZ_FIRED_TRIGGERS
QRTZ_JOB_DETAILS
QRTZ_LOCKS
QRTZ_PAUSED_TRIGGER_GRPS
QRTZ_SCHEDULER_STATE
QRTZ_SIMPLE_TRIGGERS
QRTZ_SIMPROP_TRIGGERS
QRTZ_TRIGGERS
Reading
Receipt
ReceiptItem
#Report
#ReportColumn
#ReportFilter
#Report_SecurityGroup
RequestForQuotation
RequestForQuotationItem
RequestForQuotationVendor
RequestForQuotationVendorItem
Return
ReturnItem
SLADefinition
SLAInstance
SLAInstanceTerm
SLATerm
Script
#SecurityGroup
#SecurityGroup_PermissionRecord
#SecurityGroup_User
ServiceItem
ServiceRequest
#Setting
#Shift
#ShiftPattern
#Site
Site_Address
#Site_SecurityGroup
Store
StoreItem
StoreLocator
StoreLocatorItem
StoreLocatorItemLog
StoreLocatorReservation
Task
TaskGroup
#Team
#Team_Technician
#Technician
Tenant
TenantLease
TenantLeaseCharge
TenantLeasePaymentSchedule
TenantPayment
TenantPaymentCollection
Transfer
TransferItem
#UnitConversion
#UnitOfMeasure
#User
#UserDashboard
#UserDashboardVisual
UserDevice
#UserPasswordHistory
#ValueItem
#ValueItemCategory
#Visual
#VisualFilter
#Visual_SecurityGroup
WorkOrder
WorkOrderItem
WorkOrderLabor
WorkOrderMiscCost
WorkOrderServiceItem
WorkOrderTask
#WorkflowDefinition
#WorkflowDefinitionVersion
WorkflowInstance
#__MigrationHistory
#my_aspnet_applications
#my_aspnet_schemaversion
my_aspnet_sessioncleanup
my_aspnet_sessions
)

IGNORED_TABLES_STRING=''
for TABLE in "${EXCLUDED_TABLES[@]}"
do :
   IGNORED_TABLES_STRING+=" --ignore-table=${DATABASE}.${TABLE}"
done

echo "Dump structure"
mysqldump --host=${HOST} --user=${USER} --password=${PASSWORD} --single-transaction --no-data ${DATABASE} > ${DB_FILE}

echo "Dump content"
mysqldump --host=${HOST} --user=${USER} --password=${PASSWORD} ${DATABASE} --no-create-info ${IGNORED_TABLES_STRING} >> ${DB_FILE}